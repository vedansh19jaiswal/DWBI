
CREATE TABLE TIME (
                TIME_KEY NUMBER NOT NULL,
                DATES DATE NOT NULL,
                MONTH VARCHAR2(50) NOT NULL,
                QUARTER NUMBER NOT NULL,
                YEAR NUMBER NOT NULL,
                CONSTRAINT TIME_KEY PRIMARY KEY (TIME_KEY)
);


CREATE TABLE PRODUCT (
                PRODUCT_KEY_ NUMBER NOT NULL,
                PRODUCT VARCHAR2(50) NOT NULL,
                CATEGORY VARCHAR2(50) NOT NULL,
                DEPARTMENT VARCHAR2(50) NOT NULL,
                CONSTRAINT PRODUCT_KEY PRIMARY KEY (PRODUCT_KEY_)
);


CREATE TABLE STORE (
                STORE_KEY NUMBER NOT NULL,
                STORE_NAME VARCHAR2(50) NOT NULL,
                TERRITORY VARCHAR2(50) NOT NULL,
                REGION VARCHAR2(50) NOT NULL,
                CONSTRAINT STORE_KEY PRIMARY KEY (STORE_KEY)
);


CREATE TABLE SALES_FACTS (
                PRODUCT_KEY NUMBER NOT NULL,
                STORE_KEY NUMBER NOT NULL,
                TIME_KEY NUMBER NOT NULL,
                UNIT_SALES NUMBER NOT NULL,
                SALES_DOLLARS NUMBER NOT NULL,
                CONSTRAINT SALES_PRODUCT_KEY PRIMARY KEY (PRODUCT_KEY, STORE_KEY, TIME_KEY)
);


ALTER TABLE SALES_FACTS ADD CONSTRAINT TIME_SALES_FACTS_FK
FOREIGN KEY (TIME_KEY)
REFERENCES TIME (TIME_KEY)
NOT DEFERRABLE;

ALTER TABLE SALES_FACTS ADD CONSTRAINT PRODUCT_SALES_FACTS_FK
FOREIGN KEY (PRODUCT_KEY)
REFERENCES PRODUCT (PRODUCT_KEY_)
NOT DEFERRABLE;

ALTER TABLE SALES_FACTS ADD CONSTRAINT STORE_SALES_FACTS_FK
FOREIGN KEY (STORE_KEY)
REFERENCES STORE (STORE_KEY)
NOT DEFERRABLE;